SteamVR仮想トラッカー**（腰→足→胸）
・用途は **Beat Saber撮影**（操作用途ではない）

この前提は最後まで変えない。

---

【フェーズ1：出力経路を先に完成させる（最重要）】
ゴール：**SteamVRに"仮想トラッカー"が見える**

やること
・VMT等を導入
・OSCで「位置＋回転」を送る
・数値を手打ちしてトラッカーが動くことを確認

確認
・SteamVRデバイス一覧にトラッカーが出る
・数値を変えると位置／向きが変わる

※ この段階ではカメラも人体も不要

---

【フェーズ2：人体姿勢推定を単体で安定させる】
ゴール：**骨格ランドマークが"安定して出続ける"**

やること
・MediaPipe等でPose推定
・30fps前後を確保
・画面描画で挙動を目視確認

確認
・腕振りしても大破綻しない
・脚・腰が消えすぎない

※ この段階ではSteamVRにはまだ流さない

---

【フェーズ3：人体 → トラッカー（腰1点）変換】
ゴール：**腰トラッカー1個がそれっぽく動く**

やること
・左右ヒップから腰位置を作る
・胴体方向からyawを作る
・初期キャリブレーションで座標系を合わせる
・VMTへ送信

確認
・体の向きと腰トラッカーが一致
・左右反転しない

---

【フェーズ4：平滑化・ジッタ対策】
ゴール：**止まっているときに"揺れない"**

やること
・指数移動平均などの低域フィルタ
・回転と位置は別係数
・遅延を感じない範囲で調整

確認
・静止時にプルプルしない
・動き出しが遅すぎない

---

【フェーズ5：トラッカーを増やす（足・胸）】
ゴール：**IKが成立する最低構成**

やること
・左足／右足：膝→足首ベクトルで仮向き
・胸：肩中心＋胸方向
・キャリブレーション済み座標系に変換

確認
・SteamVR上で複数トラッカーが安定
・IKが破綻しにくい

---

【フェーズ6：推論FPS改善】
ゴール：**トラッカー送信が実用的なフレームレートで動く**

やること
・現状1fps程度のボトルネックを特定・改善
・モデル軽量化、GPU活用、解像度調整など

確認
・10fps以上を安定して維持
・トラッカーの動きが目視で滑らかに見える

---

【フェーズ7：Beat Saberでの実運用調整】
ゴール：**撮影用途として破綻しにくい**

やること
・カメラ角度・高さ微調整
・脚の動きは"控えめ前提"でIK調整
・必要に応じてキャリブレーションをリセット

確認
・通しプレイで致命的破綻が出ない
・編集前提なら許容できる品質

---

【最終形（完成）】
・入力：カメラ1台
・推定：人体Pose
・出力：SteamVR仮想トラッカー
・用途：Beat Saber撮影

---

一言でまとめると。
**「先に出口を作り、次に人体を流し込み、最後に調整する」**。
この順序を守れば、途中で設計を壊さずに完成まで行ける。


(おすすめ) A. Rust＝中核サーバ、推論＝ONNX Runtime（Rust）
何がRustでできるか
・カメラ取り込み（OpenCV）
・Pose推論（MediaPipe相当のモデルをONNX化してONNX Runtimeで実行）
・平滑化・IK・座標変換
・VMT向けOSC送信（= SteamVR仮想トラッカーに流す）

Rustの主要部品
・画像入力：`opencv` crate
・推論：`ort`（ONNX Runtime）
・OSC送信：`rosc`（UDP）
・並列処理：`tokio`/`crossbeam`
このルートは「全部Rustで閉じる」現実解になりやすい。

難点
・MediaPipeそのものをRustで直接使う、は基本的に重い（C++依存が強い）
・モデル選定（軽量Poseモデル）と前後処理（正規化・後処理）を自分で合わせ込む必要がある
